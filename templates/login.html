{% if session.logged_in %}
  <script>
    window.location.href = "{{ url_for('dashboard') }}";
  </script>
{% endif %}
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- <meta charset="UTF-8" /> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Sovereignty - Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
    }
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#1e293b'
          },
          borderRadius: {
            'none': '0px',
            'sm': '4px',
            DEFAULT: '8px',
            'md': '12px',
            'lg': '16px',
            'xl': '20px',
            '2xl': '24px',
            '3xl': '32px',
            'full': '9999px',
            'button': '8px'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-[#080B1A] min-h-screen overflow-x-hidden">
  <div class="relative">
    <div class="fixed inset-0 -z-10">
      <img src="https://public.readdy.ai/ai/img_res/1178ad8746c30c405efa594cf201cbc2.jpg"
           class="w-full h-full object-cover opacity-50" alt="Background">
    </div>
    <!-- Logo container: static on mobile and absolute on larger screens -->
    <div class="static sm:absolute sm:top-8 sm:left-8 mb-4 sm:mb-0">
      <!-- Updated logo -->
      <img src="{{ url_for('static', filename='icon/net_logo.png') }}" 
           alt="NetSentry Logo" class="h-24">
    </div>
    <div class="relative container mx-auto px-6 py-16">
      <!-- min-height applied only for md and up to avoid forcing a viewport height on mobile -->
      <div class="flex flex-col md:flex-row items-center justify-center gap-8 md:gap-32 md:min-h-[calc(100vh-8rem)]">
        <div class="w-full md:w-1/2">
          <h1 class="text-6xl font-bold text-white mb-6">Monitor.Detect.Protect</h1>
          <p class="text-xl text-gray-300 mb-8">
            Your Security, Our Priority - NetSentry at Work<br>
            Threats are everywhere, but with NetSentry, you can rest easy knowing that your digital assets are in safe hands. Our advanced monitoring and detection systems ensure that you are always one step ahead of potential threats.
          </p>
        </div>
        <div class="w-full md:w-[800px] bg-black/30 backdrop-blur-xl p-6 md:p-12 rounded-lg shadow-xl">
          <h2 class="text-6xl font-bold text-white mb-8">Login</h2>
          <!-- Updated form: posts to the login route -->
          <form method="post" action="{{ url_for('login') }}" class="space-y-6">
            <div>
              <label class="block text-xl font-medium text-gray-100 mb-2">Username</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="ri-user-line text-gray-400 text-xl"></i>
                </div>
                <input type="text" name="username"
                  class="pl-10 w-full px-4 py-3 text-xl bg-black/20 text-white border border-gray-500 rounded-button focus:ring-2 focus:ring-primary focus:border-primary placeholder-gray-400"
                  placeholder="Enter your username" required>
              </div>
            </div>
            <div>
              <label class="block text-xl font-medium text-gray-100 mb-2">Password</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="ri-lock-line text-gray-400 text-xl"></i>
                </div>
                <input type="password" name="password"
                  class="pl-10 w-full px-4 py-3 text-xl bg-black/20 text-white border border-gray-500 rounded-button focus:ring-2 focus:ring-primary focus:border-primary placeholder-gray-400"
                  placeholder="Enter your password" required>
              </div>
            </div>
            <button type="submit"
              class="w-full py-3 px-4 text-4xl bg-primary text-white rounded-button hover:bg-primary/90 transition duration-300">
              Login
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Login Modal (if needed) -->
  <div id="loginModal" class="modal">
    <div class="bg-white/90 backdrop-blur-sm rounded-lg shadow-xl w-full max-w-[480px] p-6 md:p-8">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-900">Welcome Back</h2>
        <button onclick="closeModal('loginModal')" class="text-gray-400 hover:text-gray-500">
          <i class="ri-close-line ri-xl"></i>
        </button>
      </div>
      <div class="flex mb-6">
        <button class="tab-button flex-1 py-2 text-center border-b-2 border-primary text-primary" data-tab="signin">Sign In</button>
        <button class="tab-button flex-1 py-2 text-center border-b-2 border-gray-200 text-gray-500" data-tab="signup">Create Account</button>
      </div>
      <div id="signin" class="tab-content active">
        <form method="post" action="{{ url_for('login') }}" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="ri-mail-line text-gray-400"></i>
              </div>
              <input type="email" name="username"
                class="pl-10 w-full px-4 py-2 border border-gray-300 rounded-button focus:ring-2 focus:ring-primary focus:border-primary"
                placeholder="Enter your email" required>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="ri-lock-line text-gray-400"></i>
              </div>
              <input type="password" name="password"
                class="pl-10 w-full px-4 py-2 border border-gray-300 rounded-button focus:ring-2 focus:ring-primary focus:border-primary"
                placeholder="Enter your password" required>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input type="checkbox" class="h-4 w-4 text-primary border-gray-300 rounded">
              <label class="ml-2 text-sm text-gray-600">Remember me</label>
            </div>
            <a href="#" class="text-sm text-primary hover:text-primary/80">Forgot password?</a>
          </div>
          <button type="submit"
            class="w-full py-2 px-4 bg-primary text-white rounded-button hover:bg-primary/90 transition duration-300">
            Sign In
          </button>
          <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">Or continue with</span>
            </div>
          </div>
          <div class="grid grid-cols-3 gap-3">
            <button type="button"
              class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-button hover:bg-gray-50">
              <i class="ri-google-fill text-[#4285f4]"></i>
            </button>
            <button type="button"
              class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-button hover:bg-gray-50">
              <i class="ri-apple-fill"></i>
            </button>
            <button type="button"
              class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-button hover:bg-gray-50">
              <i class="ri-github-fill"></i>
            </button>
          </div>
        </form>
      </div>
      <!-- Sign-up modal content commented out for now -->
    </div>
  </div>

  <div class="modal-backdrop"></div>
  <script>
    function openModal(modalId) {
      document.getElementById(modalId).style.display = 'block';
      document.querySelector('.modal-backdrop').style.display = 'block';
    }
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
      document.querySelector('.modal-backdrop').style.display = 'none';
    }
    function switchModals(closeModalId, openModalId) {
      closeModal(closeModalId);
      openModal(openModalId);
    }
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.tab-button').forEach(btn => {
          btn.classList.remove('border-primary', 'text-primary');
          btn.classList.add('border-gray-200', 'text-gray-500');
        });
        button.classList.remove('border-gray-200', 'text-gray-500');
        button.classList.add('border-primary', 'text-primary');
        document.querySelectorAll('.tab-content').forEach(content => {
          content.classList.remove('active');
        });
        document.getElementById(button.getAttribute('data-tab')).classList.add('active');
      });
    });
    window.onclick = function(event) {
      if (event.target.classList.contains('modal-backdrop')) {
        document.querySelectorAll('.modal').forEach(modal => {
          modal.style.display = 'none';
        });
        document.querySelector('.modal-backdrop').style.display = 'none';
      }
    }
  </script>
</body>
</html>
